package mqx.view;


import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

import mqx.dao.StudentDAO;
import mqx.pojo.Student;



public class StuMenuLogin {
   StudentDAO studentDAO=new StudentDAO();
   Student student=null;
   ArrayList<Student> students=new ArrayList<Student>();
	private char key = ' ';
	Scanner input = new Scanner(System.in);
    public void mainMenu() {
    	while(true) {
    		System.out.println("学生管理信息系统");
    		System.out.println("\t 1  登录");
    		System.out.println("\t 2 退出");
    		System.out.print("请输入（1-2）:");
    		Scanner input=new Scanner(System.in);
    		key=input.next().charAt(0);
    		switch (key) {
			case '1':
				System.out.print("请输入学号：");
				String stuID=input.next();
				student=studentDAO.getStudentByID(stuID);
				if(students.isEmpty()) {
					System.out.println("你输入的学号不存在！");
					break;
				}
				System.out.print("请输入密码：");
				String stupwd=input.next();
				if(!(student.getStuPwd().trim()).equals(stupwd))
				{
					System.out.println("你输入的密码不正确！");
					break;
				}
				mainMenu2();
				break;
			case '2':
				System.out.println("你已经退出");
				System.exit(0);
				break;
			default:
				System.out.println("输入错误");
				
				break;
			}
    	}
    }
	public void mainMenu2() {
		String stuID=null;
		String stuName=null;
		String stuPwd=null;
		while (true) {
			System.out.println("=========学生管理信息系统V1.0=========");
			System.out.println("\t1、显示");
			System.out.println("\t2、添加");
			System.out.println("\t3、查找");
			System.out.println("\t4、删除");
			System.out.println("\t5、修改");
			System.out.println("\t6、帮助");
			System.out.println("\t7、退出");
			System.out.print("\t请选择（1-7）：");
			Scanner input = new Scanner(System.in);
			key = Utility.readMenuSelection();

			switch (key) {
			case '1':
				students=studentDAO.getStudent();
				System.out.println(students);
				break;
			case '2':
				System.out.print("请输入学号：");
				stuID=input.next();
				students=studentDAO.getStudent(stuID);
				if(students.size()>0) {
					System.out.println("你输入的学号已经存在！");
					break;
				}
				System.out.print("请输入姓名：");
				stuName=input.next();
				System.out.print("请输入密码：");
				stuPwd=input.next();
				student =new Student(stuID, stuName,stuPwd);
				System.out.println(studentDAO.insertStudent(student));
				break;
			case '3':
				System.out.print("请输入学号：");
				stuID=input.next();
				students=studentDAO.getStudent(stuID);
				if(students.size()>0) {
					System.out.println(students);
					
				}
				else {
					System.out.println("没有找到学号为"+stuID+"的信息");
				}
				break;
			case '4':
				System.out.print("请输入学号：");
				stuID=input.next();
				System.out.println(studentDAO.deleteStudent(stuID));
				break;
			case '5':
				System.out.print("请输入要修改的学号：");
				stuID=input.next();
				students=studentDAO.getStudent(stuID);
				if(students.isEmpty()) {
					System.out.println("你输入的学号不存在！");
					break;
				}
				System.out.print("请输入姓名：");
				stuName=input.next();
				System.out.print("请输入密码：");
				stuPwd=input.next();
				student =new Student(stuID, stuName,stuPwd);
				System.out.println(studentDAO.updateStudent(student));
				break;
			case '7':
				char c=Utility.readConfirmSelection();
				if('Y'==c) {
					System.out.println("程序已经退出");
					System.exit(0);
				}
				 break;
//			default:
//	
//				break;

			}
		}
	}

}
